<!DOCTYPE html>
<html>

<head>
    <title>Snap! 7.0.3 - dev - Build Your Own Blocks</title>
    <link rel="icon" href="src/favicon.ico" type="image/x-icon">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="img/snap-icon-152.png">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="white" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Snap!">
    <meta name="msapplication-TileImage" content="img/snap-icon-144.png">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <script src="src/morphic.js?version=2021-12-10"></script>
    <script src="src/symbols.js?version=2021-03-03"></script>
    <script src="src/widgets.js?version=2021-17-09"></script>
    <script src="src/blocks.js?version=2021-12-20"></script>
    <script src="src/threads.js?version=2021-12-22"></script>
    <script src="src/objects.js?version=2021-12-20"></script>
    <script src="src/scenes.js?version=2021-11-24"></script>
    <script src="src/gui.js?version=2021-12-22"></script>
    <script src="src/paint.js?version=2021-07-05"></script>
    <script src="src/lists.js?version=2021-12-15"></script>
    <script src="src/byob.js?version=2021-12-16"></script>
    <script src="src/tables.js?version=2021-05-07"></script>
    <script src="src/sketch.js?version=2021-11-03"></script>
    <script src="src/video.js?version=2019-06-27"></script>
    <script src="src/maps.js?version=2021-06-15"></script>
    <script src="src/extensions.js?version=2021-12-15"></script>
    <script src="src/xml.js?version=2021-07-05"></script>
    <script src="src/store.js?version=2021-12-14"></script>
    <script src="src/locale.js?version=2021-12-10"></script>
    <script src="src/cloud.js?version=2021-02-04"></script>
    <script src="src/api.js?version=2021-11-17"></script>
    <script src="src/sha512.js?version=2019-06-27"></script>
    <script src="src/FileSaver.min.js?version=2019-06-27"></script>

    <!-- following two scripts added by Alexander Somma -->
    <!-- <script src="src/onload.js"></script> -->
    <!-- <script src="src/ecraft2learn.js"></script> -->
    <!--<script src='https://cdn.statically.io/gh/WebReflection/circular-json/af2987de/build/circular-json.js'></script>-->

    <!-- App Specific Files -->
    <script src="RIAC/open-with.js"></script>
    <script src="RIAC/helpers.js"></script>
    <!-- /App Specific Files -->

    <script>
        var world;
        window.onload = function () {
            const worldReady = new Event('world-ready');
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js');
            }
            world = new WorldMorph(document.getElementById('world'));
            new IDE_Morph().openIn(world);
            loop();
            // Dispatches worldReady so electron and other app specific scripts can do their thing.
            document.dispatchEvent(worldReady);
            world.children[0].refreshIDE();
        };
        function loop() {
            requestAnimationFrame(loop);
            world.doOneCycle();
        }
    </script>
    <!-- This script is blank unless within the electron app -->
    <script src="RIAC/electron-communications.js"></script>
    <!-- <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <link rel="stylesheet" type="text/css" href="modal.css"> -->
    <style>
        body {
            padding: unset
        }
    </style>
    <!-- Base Menu CSS -->
    <link rel="stylesheet" type="text/css" href="RIAC/menu.css">
    <!-- Platform Specific Menu Styling -->
    <link rel="stylesheet" type="text/css" href="RIAC/menu_style.css">
    <link rel="stylesheet" type="text/css" href="RIAC/riac_layout.css">
</head>

<body style="margin: 0;">

    
    <div id="main-menu-container" class="menu-container">
        <div class="menu-header">
            Robot In A Can Snap! - Main Menu
        </div>
        <div id="main-menu" class="menu">
            <div class="button" onclick="updateBlocks()">Update Blocks</div>
            <a class="button" onclick="testButton()" href="https://guide.robotinacan.com/" target="_blank">Open Guidebook</a>
            <div class="button" onclick="init_blocks()">Initialize Blocks</div>
            <div class="button menu-toggle" data-menu-target="project">Button 4</div>
        </div>
    </div>
    <div id="project-menu-container" class="menu-container">
        <div class="menu-header">
            Robot In A Can Snap! - Projects
        </div>
        <div id="project-menu" class="menu" data-parent-menu="main">
            <div class="button">Button 4</div>
            <div class="button">Button 4</div>
            <div class="button">Button 4</div>
            <div class="button">Button 4</div>
        </div>
    </div>
    <div id="menu-bar">
        <div class="menu-toggle" data-menu-target="main">Menu</div>
    </div>
    <div id="world-wrapper" >
    <canvas id="world" tabindex="1" style="position: absolute;"></canvas>
    </div>

</body>
<script>
    SpriteMorph.prototype.customCategories.set("RIAC", new Color(216, 45, 45));
    SpriteMorph.prototype.customCategories.set("eBrain", new Color(33, 33, 33));
    window.addEventListener("load", afterLoaded, false);
    var executed = false;

    function fullScreenCheck() {
        if (document.fullscreenElement) return;
        document.documentElement.webkitRequestFullscreen()
        return document.documentElement.requestFullscreen();
    }

    // async function rotate() {
    //     try {
    //         await fullScreenCheck();
    //     } catch (err) {
    //         console.error(err);
    //     }
    //     await screen.orientation.lock("landscape");
    //     world.setWidth(world.worldCanvas.width);
    //     world.setHeight(world.worldCanvas.height);
    //     world.children[0].refreshIDE();
    //     mobileStageSmall();
    // }

    screen.orientation.addEventListener("change", () => {
        rotate();
    });

    async function mobileStageSmall() {
        if (!executed) {
            executed = true;
            world.children[0].toggleStageSize();
        }
    }

    function afterLoaded() {
        var ide = world.children[0];
        Process.prototype.enableJS = true;
        ide.flatDesign();
        ide.setBlocksScale(1.2);
        ide.setPaletteWidth(235);

        // Removed for the app. 

        // world.children[0].getURL("https://raw.githubusercontent.com/Robot-In-A-Can/eBrain-Snap/develop/RIAC%20Blocks.xml", libraryText => {
        //     world.children[0].droppedText(libraryText, "RIAC");
        //     this.isLoadingLibrary = true;
        //     //load
        //     //var string = localStorage.snapIDE;
        //     //ide.openProjectString(string);
        // });
        init_blocks();
    }
</script>

<!-- App Menu Code -->

<script src="RIAC/menu.js"></script>
<script src="RIAC/buttons.js"></script>

</html>