<!DOCTYPE html>
<html>
    <head>
        <title>Snap! 7 - dev - Build Your Own Blocks</title>
        <link rel="icon" href="src/favicon.ico" type="image/x-icon">
        <link rel="manifest" href="manifest.json">
        <link rel="apple-touch-icon" href="img/snap-icon-152.png">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="white"/>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <meta name="apple-mobile-web-app-title" content="Snap!">
        <meta name="msapplication-TileImage" content="img/snap-icon-144.png">
        <meta name="msapplication-TileColor" content="#FFFFFF">
        <script src="src/morphic.js?version=2021-07-09"></script>
        <script src="src/symbols.js?version=2021-03-03"></script>
        <script src="src/widgets.js?version=2021-07-21"></script>
        <script src="src/blocks.js?version=2021-07-05"></script>
        <script src="src/threads.js?version=2021-07-20"></script>
        <script src="src/objects.js?version=2021-07-23"></script>
        <script src="src/scenes.js?version=2021-07-21"></script>
        <script src="src/gui.js?version=2021-08-06"></script>
        <script src="src/paint.js?version=2021-07-05"></script>
        <script src="src/lists.js?version=2021-07-19"></script>
        <script src="src/byob.js?version=2021-08-03"></script>
        <script src="src/tables.js?version=2021-05-07"></script>
        <script src="src/sketch.js?version=2021-07-05"></script>
        <script src="src/video.js?version=2019-06-27"></script>
        <script src="src/maps.js?version=2021-06-15"></script>
        <script src="src/extensions.js?version=2021-08-03"></script>
        <script src="src/xml.js?version=2021-07-05"></script>
        <script src="src/store.js?version=2021-08-01"></script>
        <script src="src/locale.js?version=2021-07-12"></script>
        <script src="src/cloud.js?version=2021-02-04"></script>
        <script src="src/api.js?version=2021-07-05"></script>
        <script src="src/sha512.js?version=2019-06-27"></script>
        <script src="src/FileSaver.min.js?version=2019-06-27"></script>
        <script src="src/open-with.js"></script>
        <script src="src/helpers.js"></script>
        <script>
            var world;
            window.onload = function () {
                const worldReady = new Event('world-ready');
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('sw.js');
                }
                world = new WorldMorph(document.getElementById('world'));
                new IDE_Morph().openIn(world);
                loop();
                document.dispatchEvent(worldReady);
            };
            function loop() {
                requestAnimationFrame(loop);
                world.doOneCycle();
            }
        </script>
        <script src="src/electron-communications.js"></script>
        <script type="module">
            
        </script>
    </head>
    <body style="margin: 0;">
        <div class="hidden" id="video">
            <video></video>
        </div>
        <style>
            .hidden {
                display: none;
            }
            #video {
                z-index: 10000000;
                /* display: ; */
                position: absolute;
                top:0;
                left:0;
                height: 100vh;
                width: 100vw;
            }
        </style>
        <canvas id="world" tabindex="1" style="position: absolute;"></canvas>
    </body>
    <script>
        SpriteMorph.prototype.customCategories.set("RIAC",new Color(216,45,45));
        SpriteMorph.prototype.customCategories.set("eBrain",new Color(0,0,0));
        window.addEventListener("load", afterLoaded,false);
        function afterLoaded(){
            world.children[0].flatDesign();
            Process.prototype.enableJS = true;
        }
    </script>
    <script type="module">
        import QrScanner from './src/qr-scanner.min.js';
        QrScanner.WORKER_PATH = './src/qr-scanner-worker.min.js';
        const qrScanner = new QrScanner(document.getElementById('video').children[0], (result) => {
            console.log('decoded qr code:', result);
            qrScanner.stop();
    });
        function startScanning() {
            document.getElementById('video').classList.remove('hidden');
            qrScanner.start();
        }
        function stopScanning(){
            document.getElementById('video').classList.add('hidden');
            qrScanner.stop();
        }
        document.addEventListener('scan', startScanning);
        document.addEventListener('stop', stopScanning);

    </script>
</html>
